generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model UserProfile {
  id         Int    @id @default(autoincrement())
  userId     String @db.Uuid
  name       String?
  phone      String?
  language   Language? @relation(fields: [languageId], references: [id])
  languageId Int?
  onboardingCompleted Boolean  @default(false)
  neoCommunities UserNeoCommunity[]

  @@unique([userId])
  @@map("user_profile")
}

model Role {
  id    Int        @id @default(autoincrement())
  name  String     @unique
  users UserRole[]

  @@map("roles")
}

model UserRole {
  id     Int    @id @default(autoincrement())
  userId String @db.Uuid
  roleId Int

  role Role @relation(fields: [roleId], references: [id])

  @@unique([userId, roleId])
  @@map("user_roles")
}

model Language {
  id           Int           @id @default(autoincrement())
  name         String        @unique
  is_supported Boolean  @default(false)
  icon         String?
  userProfiles UserProfile[]

  @@map("language")
}

model NeoCommunities {
  id             Int           @id @default(autoincrement())
  name           String
  users          UserNeoCommunity[]

  @@unique([name])
  @@map("neo_communities")
}

model UserNeoCommunity {
  id             Int    @id @default(autoincrement())
  userId         String @db.Uuid
  neoCommunityId Int

  userProfile  UserProfile @relation(fields: [userId], references: [userId], onDelete: Cascade)
  neoCommunity NeoCommunities @relation(fields: [neoCommunityId], references: [id], onDelete: Cascade)

  @@unique([userId, neoCommunityId])
  @@map("user_neo_communities")
}
