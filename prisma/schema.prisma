generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model UserProfile {
  userId     String   @id @db.Uuid
  firstName String
  lastName  String
  phone     String?
  language   Language @relation(fields: [languageId], references: [id])
  languageId Int

  @@map("user_profile")
}

model Role {
  id    Int        @id @default(autoincrement())
  name  String     @unique
  users UserRole[]

  @@map("roles")
}

model UserRole {
  id     Int    @id @default(autoincrement())
  userId String @db.Uuid
  roleId Int

  role Role @relation(fields: [roleId], references: [id])

  @@unique([userId, roleId])
  @@map("user_roles")
}

model Language {
  id           Int           @id @default(autoincrement())
  name         String        @unique
  icon         String?
  userProfiles UserProfile[]

  @@map("language")
}

model Country {
  id              Int           @id @default(autoincrement())
  name            String        @unique
  icon            String?
  neoCommunities  NeoCommunities[]

  @@map("countries")
}


model NeoCommunities {
  id             Int           @id @default(autoincrement())
  name           String
  countryId      Int
  country        Country       @relation(fields: [countryId], references: [id])
  users          UserNeoCommunity[]

  @@unique([name, countryId])
  @@map("neo_communities")
}

model UserNeoCommunity {
  id             Int    @id @default(autoincrement())
  userId         String @db.Uuid
  neoCommunityId Int

  neoCommunity NeoCommunities @relation(fields: [neoCommunityId], references: [id])

  @@unique([userId, neoCommunityId])
  @@map("user_neo_communities")
}
